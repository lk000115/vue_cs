<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基于fetch实现的ajax请求</title>
</head>
<body>
    <button id="myget" type="button">get</button>
    <button id="mypost" type="button">post</button>
    <button id="myput" type="button">put</button>
    <button id="mypatch" type="button">patch</button>
    <button id="mydelete" type="button">delete</button>
</body>
    <script>
    //   使用同目录下的data.json数据文件
   myget.onclick = function () {
        fetch("http://localhost:3000/users").then(
            res=>{
                if(res.ok){
                    // console.log(res);
                    return  res.json()       //res.text()  返回字符串  
                }else{
                    return Promise.reject(res) 
                }
            } ).then(res=>{
                console.log(res);
            }).catch(err=>{
                console.log("出错了");
                console.log(err.status, err.statusText);

            })
        // 以上简写形式
        // fetch("http://localhost:3000/users")
        // .then(res=>res.json())
        // .then(res=>{
        //     console.log(res);
        // })   
   }
  
   mypost.onclick = function(){
          
     fetch("http://localhost:3000/users",{
        method:"post",
        body:JSON.stringify({
           name:"aa",
           password:9876 
        }),
        headers: {"content-type":"application/json"}
     })
        .then(res=>res.json())
        .then(res=>{
            console.log(res);
        })   

   }    

   mydelete.onclick = function(){

    fetch("http://localhost:3000/users/6",{
        method:"delete"
    })
    .then(res=>res.json())
    .then(res=>{
            console.log(res);
        })  

   }

    </script>
</html>
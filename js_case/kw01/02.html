<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>前后端交互案例</title>
</head>
<body>
    <input type="text" placeholder="ss" id="">
    <button id="myadd" type="button">add</button>
    <ul class="list">

    </ul>
    <script type="module">
        import {ajax  } from "../../tools/util.js";
        // console.log(ajax);
       class TodoList{
           constructor(select){
               this.listEle = document.querySelector(select);
               this.listdata = [];
               this.init();
           }
          init(){
            // 初始化
            this.bindEvent()
            this.getList();
          }

          getList(){         
            //  var that = this;
             ajax({
                 url:"http://localhost:3000/list",    
                 success:(res)=>{
                    // 函数内部调用其他函数this指向会改变,而箭头函数的this是指向上级函数的this
                    this.listdata = res;
                    this.render();
                 },
                 error:function(){

                 }
             })  

          }

        bindEvent(){
    //   绑定事件,利用事件冒泡,把事件绑定在ul-list上, ul-li的事件会冒泡到lists上


        } 
        
         addItem(){
            
         }
        // 把数据渲染到页面  
        render(){
            this.listEle.innerHTML  =  this.listdata.map(item=> ` 
            <li> 
                ${item["text"]}
                <Button type="button">DEL</Button> 
            </li> `).join("")  ;

        } 



        // 类结束  
       }
       
       var obj = new TodoList(".list");
       console.log(obj);
    </script>

</body>
</html>